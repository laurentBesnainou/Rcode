{
    "collab_server" : "",
    "contents" : "#integration de Leaflet pour positionner les consultants\nlibrary(shiny)\nlibrary (ggmap)\nlibrary(leaflet) \nshinyApp(\n  ui = fluidPage(leafletOutput('myMap')),\n  server = function(input, output) {\n    \n    # download and load data\n    url <-  \"https://github.com/Robinlovelace/sdvwR/raw/master/data/gps-trace.gpx\"\n    download.file(url, destfile = \"shef2leeds.gpx\" )\n      library(rgdal)\n    shef2leeds <- readOGR(\"shef2leeds.gpx\", layer = \"tracks\")\n    \n    map = leaflet() %>% addTiles() %>% setView(-1.5, 53.4, 9) %>% \n      addPolylines(data = shef2leeds, color = \"red\", weight = 4)\n    output$myMap = renderLeaflet(map)\n  }\n)\n\nm <- leaflet() %>% addTiles()\n\nimg <- readPNG(\"~/repos/Creating-maps-in-R/figure//shiny_world.png\")\ngrid.raster(img)\n\nm %>% setView(lng = -1.5, lat = 53.4, zoom = 10) # set centre and extent of map\n\n\nm2 <- m %>%\n  setView(-1.5, 53.4, 10) %>% # map location\n  addMarkers(-1.4, 53.5) %>% # add a marker\n  addPopups(-1.6, 53.3, popup = \"Hello Sheffield!\") %>% # popup\n  # add som circles:\n  addCircles(color = \"black\", runif(90, -2, -1), runif(90, 53, 54), runif(90, 10, 500))\n(m2)\n\n#Fonction ggmap\npoi <- data.frame(nom = c('Bscc',\n                          'SKILOC JAY SPORT'),\n                  adresses = c(\"La poste, saint quentin en yvelines\",\n                               'Immeuble Samoens 1600, Grande Rue, 74340 Samoens'), \n                  stringsAsFactors = F)\n\npoigeo <- geocode(poi$adresses, output = \"latlona\")\ngeoPOI <- data.frame(poi,poigeo)\n\n# affichage des points d'intérêt sur la carte\nm <- leaflet(data = geoPOI ) %>% addTiles() %>% addMarkers(~lon, ~lat,  popup = ~as.character(nom))\n(m)\n\n\n\nlibrary(leaflet)\n\nicon.glyphicon <- makeAwesomeIcon(icon= 'flag', markerColor = 'blue',\n                                  iconColor = 'black', library = 'glyphicon')\nicon.fa <- makeAwesomeIcon(icon = 'flag', markerColor = 'red', library='fa',\n                           iconColor = 'black')\nicon.ion <- makeAwesomeIcon(icon = 'home', markerColor = 'green',\n                            library='ion')\n\n\n# Marker + Label\nleaflet() %>% addTiles() %>%\n  addAwesomeMarkers(\n    lng=-118.456554, lat=34.078039,\n    label='This is a label'\n    )\n\nleaflet() %>% addTiles() %>%\n  addAwesomeMarkers(\n    lng=-118.456554, lat=34.078039,\n    label='This is a label',\n    icon = icon.fa)\n\nleaflet() %>% addTiles() %>%\n  addAwesomeMarkers(\n    lng=-118.456554, lat=34.078039,\n    label='This is a label',\n    icon = icon.ion)\n\n# Marker + Static Label using custom label options\nleaflet() %>% addTiles() %>%\n  addAwesomeMarkers(\n    lng=-118.456554, lat=34.078039,\n    label='This is a static label',\n    labelOptions = labelOptions(noHide = T),\n    icon = icon.fa)\n\n\ncities <- read.csv(textConnection(\"\n                                  City,Lat,Long,Pop\n                                  Boston,42.3601,-71.0589,645966\n                                  Hartford,41.7627,-72.6743,125017\n                                  New York City,40.7127,-74.0059,8406000\n                                  Philadelphia,39.9500,-75.1667,1553000\n                                  Pittsburgh,40.4397,-79.9764,305841\n                                  Providence,41.8236,-71.4222,177994\n                                  \"))\n\nlibrary(dplyr)\ncities <- cities %>% mutate(PopCat=ifelse(Pop <500000,'blue','red'))\n\n\nleaflet(cities) %>% addTiles() %>%\n  addAwesomeMarkers(lng = ~Long, lat = ~Lat,\n                    label = ~City,\n                    icon = icon.ion)\n\nicon.pop <- awesomeIcons(icon = 'users',\n                         markerColor = ifelse(cities$Pop <500000,'blue','red'),\n                         library = 'fa',\n                         iconColor = 'black')\n\nleaflet(cities) %>% addTiles() %>%\n  addAwesomeMarkers(lng = ~Long, lat = ~Lat,\n                    label = ~City,\n                    icon = icon.pop)\n\n# Make a list of icons (from two different icon libraries).\n# We'll index into it based on name.\npopIcons <- awesomeIconList(\n  blue = makeAwesomeIcon(icon='user', library='glyphicon', markerColor = 'blue'),\n  red = makeAwesomeIcon(icon='users', library='fa', markerColor = 'red'))\n\nm = leaflet() %>% addTiles()\nm  # a map with the default OSM tile layer\n\nm = m %>% setView(-93.65, 42.0285, zoom = 17)\nm\n\nm %>% addPopups(-93.65, 42.0285, 'Here is the <b>Department of Statistics</b>, ISU')",
    "created" : 1495537502943.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "834499890",
    "id" : "A252F274",
    "lastKnownWriteTime" : 1486566832,
    "last_content_update" : 1486566832,
    "path" : "D:/tmp/leaflet/ui.r",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}